package com.amdose.broker.engine.test;

import com.amdose.broker.engine.utils.DateUtils;
import com.amdose.database.entities.CandleEntity;
import com.amdose.broker.engine.utils.JsonUtils;

import java.util.ArrayList;
import java.util.List;

/**
 * @author Alaa Jawhar
 */
public class binanceResponseMain {
    public static void main(String[] args) {
        String jsonStr = "[[1705190400000,\"42847.99000000\",\"43079.00000000\",\"41720.00000000\",\"41732.35000000\",\"28228.40894000\",1705276799999,\"1202212782.25769300\",1235727,\"13690.30843000\",\"583261659.73857610\",\"0\"],[1705276800000,\"41732.35000000\",\"43400.43000000\",\"41718.05000000\",\"42511.10000000\",\"40269.89303000\",1705363199999,\"1718982911.10810270\",1657611,\"19924.76030000\",\"849997411.08758290\",\"0\"],[1705363200000,\"42511.10000000\",\"43578.01000000\",\"42050.00000000\",\"43137.95000000\",\"45045.74589000\",1705449599999,\"1931947150.05907020\",1716580,\"24064.55667000\",\"1031525441.93520850\",\"0\"],[1705449600000,\"43137.94000000\",\"43198.00000000\",\"42200.69000000\",\"42776.10000000\",\"33266.21388000\",1705535999999,\"1419888430.92288920\",1438172,\"16648.20529000\",\"710532768.04757790\",\"0\"],[1705536000000,\"42776.09000000\",\"42930.00000000\",\"40683.28000000\",\"41327.50000000\",\"43907.51641000\",1705622399999,\"1839426541.26357900\",1466087,\"21085.14336000\",\"883292634.20636370\",\"0\"],[1705622400000,\"41327.51000000\",\"42196.86000000\",\"40280.00000000\",\"41659.03000000\",\"48342.74559000\",1705708799999,\"1993846466.53875190\",1641428,\"24347.50020000\",\"1004478721.37920550\",\"0\"],[1705708800000,\"41659.03000000\",\"41872.56000000\",\"41456.30000000\",\"41696.04000000\",\"15923.99493000\",1705795199999,\"662768008.15093430\",807324,\"7557.36632000\",\"314535141.99556360\",\"0\"],[1705795200000,\"41696.05000000\",\"41881.39000000\",\"41500.98000000\",\"41580.33000000\",\"11730.16301000\",1705881599999,\"489151571.03090430\",657817,\"5576.56045000\",\"232552207.16073290\",\"0\"],[1705881600000,\"41580.32000000\",\"41689.65000000\",\"39431.58000000\",\"39568.02000000\",\"55426.19911000\",1705967999999,\"2247452153.79543270\",2147250,\"26788.13985000\",\"1086650848.06705250\",\"0\"],[1705968000000,\"39568.02000000\",\"40176.74000000\",\"38555.00000000\",\"39897.60000000\",\"57956.63351000\",1706054399999,\"2275851990.64682690\",2043925,\"30913.97177000\",\"1214417243.69641180\",\"0\"],[1706054400000,\"39897.59000000\",\"40555.00000000\",\"39484.19000000\",\"40084.88000000\",\"39293.82861000\",1706140799999,\"1569704923.83074920\",1675615,\"20673.05725000\",\"825887009.47442260\",\"0\"],[1706140800000,\"40084.89000000\",\"40300.24000000\",\"39550.00000000\",\"39961.09000000\",\"31022.11853000\",1706227199999,\"1238813296.15261370\",1291233,\"15685.24919000\",\"626369240.37339640\",\"0\"],[1706227200000,\"39961.09000000\",\"42246.82000000\",\"39822.52000000\",\"41823.51000000\",\"47384.96726000\",1706313599999,\"1951700659.28980700\",1624861,\"24674.75551000\",\"1016105199.71712130\",\"0\"],[1706313600000,\"41823.51000000\",\"42200.00000000\",\"41394.34000000\",\"42120.63000000\",\"16224.41667000\",1706399999999,\"678418702.35094450\",751148,\"7485.64978000\",\"312938659.24802430\",\"0\"],[1706400000000,\"42120.63000000\",\"42842.68000000\",\"41620.81000000\",\"42031.06000000\",\"27294.99838000\",1706486399999,\"1154365891.66825870\",1032493,\"12971.18820000\",\"548670338.63940100\",\"0\"],[1706486400000,\"42031.05000000\",\"43333.00000000\",\"41804.88000000\",\"43302.70000000\",\"31542.74207000\",1706572799999,\"1343462280.36186840\",1197856,\"15996.88627000\",\"681504721.35851260\",\"0\"],[1706572800000,\"43302.71000000\",\"43882.36000000\",\"42683.99000000\",\"42941.10000000\",\"37619.24546000\",1706659199999,\"1633251085.67135960\",1316610,\"19317.29993000\",\"838876408.45566850\",\"0\"],[1706659200000,\"42941.10000000\",\"43745.11000000\",\"42276.84000000\",\"42580.00000000\",\"39871.13688000\",1706745599999,\"1711665577.05308240\",1499559,\"20289.94825000\",\"871009715.17022070\",\"0\"],[1706745600000,\"42580.00000000\",\"43285.13000000\",\"41884.28000000\",\"43082.94000000\",\"35231.04664000\",1706831999999,\"1497121440.64400210\",1392269,\"18134.84304000\",\"770635549.48421270\",\"0\"],[1706832000000,\"43082.95000000\",\"43432.63000000\",\"42941.10000000\",\"43165.44000000\",\"13506.50888000\",1706918399999,\"582461214.11316780\",445662,\"7485.52324000\",\"322811149.42521560\",\"0\"]]";
        List<List<Object>> o = JsonUtils.convertToObject(jsonStr, List.class);

        List<CandleEntity> response = new ArrayList<>();
        for (List<Object> doubles : o) {
            CandleEntity brokerCandle = new CandleEntity();
            brokerCandle.setDate(DateUtils.convertLongToDate((long) doubles.get(0)));
            brokerCandle.setOpen(Double.parseDouble((String) doubles.get(1)));
            brokerCandle.setHigh(Double.parseDouble((String) doubles.get(2)));
            brokerCandle.setLow(Double.parseDouble((String) doubles.get(3)));
            brokerCandle.setClose(Double.parseDouble((String) doubles.get(4)));
            brokerCandle.setVolume(Double.parseDouble((String) doubles.get(5)));
            response.add(brokerCandle);
        }

        System.out.println(o.get(0).get(1));
    }
}
